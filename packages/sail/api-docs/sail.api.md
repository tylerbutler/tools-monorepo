## API Report File for "@tylerbu/sail"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AsyncPriorityQueue } from 'async';
import type { BuildProjectConfig } from '@tylerbu/sail-infrastructure';
import child_process from 'node:child_process';
import { IBuildProject } from '@tylerbu/sail-infrastructure';
import { IPackage } from '@tylerbu/sail-infrastructure';
import { IPackageManager } from '@tylerbu/sail-infrastructure';
import { IReleaseGroup } from '@tylerbu/sail-infrastructure';
import { IWorkspace } from '@tylerbu/sail-infrastructure';
import { Logger } from '@tylerbu/cli-api';
import { PackageBase } from '@tylerbu/sail-infrastructure';
import { PackageJson } from '@tylerbu/sail-infrastructure';
import { ReleaseGroupName } from '@tylerbu/sail-infrastructure';
import type { SimpleGit } from 'simple-git';
import { WorkspaceName } from '@tylerbu/sail-infrastructure';

// @public
export interface BuildContext {
    // (undocumented)
    readonly buildProjectConfig: BuildProjectConfig;
    readonly gitRepo: SimpleGit;
    readonly gitRoot: string;
    // (undocumented)
    readonly log: Logger;
    // @deprecated
    readonly repoRoot: string;
    readonly sailConfig: ISailConfig;
    readonly sharedCache?: SharedCacheManager;
    readonly taskHandlerRegistry: TaskHandlerRegistry;
}

// @public
export class BuildGraphPackage implements DependencyNode, IBuildablePackage {
    constructor(context: BuildGraphContext, pkg: BuildPackage, globalTaskDefinitions: TaskDefinitions);
    // (undocumented)
    build(q: AsyncPriorityQueue<TaskExec>): Promise<IBuildResult>;
    // (undocumented)
    readonly context: BuildGraphContext;
    // (undocumented)
    createTasks(buildTaskNames: string[]): boolean | undefined;
    // (undocumented)
    readonly dependentPackages: BuildGraphPackage[];
    // (undocumented)
    finalizeDependentTasks(): void;
    // (undocumented)
    getDependsOnTasks(task: Task, taskName: string, pendingInitDep: Task[]): Task[];
    // (undocumented)
    getLockFileHash(): Promise<string>;
    // (undocumented)
    getScriptTask(taskName: string, pendingInitDep: Task[]): Task | undefined;
    // (undocumented)
    getTask(taskName: string, pendingInitDep: Task[] | undefined): Task | undefined;
    // (undocumented)
    initializeDependentLeafTasks(): void;
    // (undocumented)
    initializeWeight(): void;
    // (undocumented)
    isUpToDate(): Promise<boolean>;
    // (undocumented)
    level: number;
    // (undocumented)
    readonly pkg: BuildPackage;
    reset(): void;
    // (undocumented)
    get taskCount(): number;
    // (undocumented)
    readonly taskManager: TaskManager;
}

// @public
export function getSailConfig(rootDir: string, noCache?: boolean, log?: Logger): {
    config: ISailConfig;
    configFilePath: string;
};

// @public
export interface ISailConfig {
    buildProject: BuildProjectConfig;
    declarativeTasks?: DeclarativeTasks;
    multiCommandExecutables?: string[];
    plugins?: TaskHandlerPlugin[];
    tasks?: TaskDefinitionsOnDisk;
    version: number;
}

// @public (undocumented)
export abstract class LeafTask extends Task {
    constructor(node: BuildGraphPackage, command: string, context: BuildContext, taskName: string | undefined, isTemp?: boolean);
    // (undocumented)
    addDependentLeafTasks(dependentLeafTasks: Iterable<LeafTask>): void;
    protected get canUseCache(): boolean;
    // (undocumented)
    protected checkIsUpToDate(): Promise<boolean>;
    // (undocumented)
    protected abstract checkLeafIsUpToDate(): Promise<boolean>;
    // (undocumented)
    collectLeafTasks(leafTasks: Set<LeafTask>): void;
    // (undocumented)
    protected dependentTaskPromises?: Promise<BuildResult>[];
    // (undocumented)
    exec(): Promise<BuildResult>;
    // (undocumented)
    get executable(): string;
    // (undocumented)
    protected get executionCommand(): string;
    protected getCacheInputFiles(): Promise<string[]>;
    protected getCacheOutputFiles(): Promise<string[]>;
    // (undocumented)
    protected getDependentLeafTasks(): SetIterator<LeafTask>;
    protected getPackageFileFullPath(filePath: string): string;
    // (undocumented)
    protected getVsCodeErrorMessages(errorMessages: string): string;
    // (undocumented)
    initializeDependentLeafTasks(): void;
    // (undocumented)
    initializeWeight(): number;
    // (undocumented)
    get isDisabled(): boolean;
    protected abstract get isIncremental(): boolean | undefined;
    // (undocumented)
    protected markExecDone(): Promise<void>;
    protected get recheckLeafIsUpToDate(): boolean;
    // (undocumented)
    protected runTask(q: AsyncPriorityQueue<TaskExec>): Promise<BuildResult>;
    // (undocumented)
    protected get taskWeight(): number;
    // (undocumented)
    protected traceError(msg: string): void;
    // (undocumented)
    protected traceNotUpToDate(): void;
    // (undocumented)
    protected traceTrigger(reason: string): void;
    // (undocumented)
    protected get useWorker(): boolean;
    // (undocumented)
    get weight(): number;
}

// @public
export interface SailPlugin {
    handlers: Record<string, TaskHandler>;
    name?: string;
}

// @public
export type TaskHandler = TaskHandlerConstructor | TaskHandlerFunction;

// @public
export type TaskHandlerConstructor = new (node: BuildGraphPackage, command: string, context: BuildContext, taskName?: string) => LeafTask;

// @public
export type TaskHandlerFunction = (node: BuildGraphPackage, command: string, context: BuildContext, taskName?: string) => LeafTask;

// @public
export type TaskHandlerPlugin = string | TaskHandlerPluginConfig;

// @public
export interface TaskHandlerPluginConfig {
    exportName?: string;
    module: string;
}

// @public
export class TaskHandlerRegistry {
    clear(): void;
    get(executable: string): TaskHandler | undefined;
    getRegisteredExecutables(): string[];
    has(executable: string): boolean;
    loadHandler(executable: string, config: TaskHandlerPluginConfig, baseDir?: string): Promise<void>;
    loadHandlers(handlers: Record<string, TaskHandlerPluginConfig>, baseDir?: string): Promise<Error[]>;
    loadPlugin(plugin: TaskHandlerPlugin, baseDir?: string): Promise<void>;
    loadPlugins(plugins: TaskHandlerPlugin[], baseDir?: string): Promise<Error[]>;
    register(executable: string, handler: TaskHandler): void;
}

// (No @packageDocumentation comment for this package)

```
