{"version":3,"file":"writeOnceMap.js","sourceRoot":"","sources":["../src/writeOnceMap.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AACH,MAAM,OAAO,aAAc,SAAQ,KAAK;IACvC;;;;OAIG;IACH,YAAY,GAAW;QACtB,KAAK,CAAC,QAAQ,GAAG,0CAA0C,CAAC,CAAC;QAC7D,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC;IAC7B,CAAC;CACD;AAED;;;;;;;;GAQG;AACH,MAAM,OAAO,YAAmB,SAAQ,GAAS;IAChD;;;;;;;OAOG;IACa,GAAG,CAAC,GAAM,EAAE,KAAQ,EAAE,KAAK,GAAG,KAAK;QAClD,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;YAC7B,MAAM,IAAI,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;QACtC,CAAC;QACD,2CAA2C;QAC3C,OAAO,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC;CACD","sourcesContent":["/**\n * An error thrown when trying to update an element in a {@link WriteOnceMap} that has already been set.\n *\n * @beta\n */\nexport class KeyAlreadySet extends Error {\n\t/**\n\t * Create a new KeyAlreadySet error.\n\t *\n\t * @param key - The Map key that was already set.\n\t */\n\tconstructor(key: string) {\n\t\tsuper(`Key \"${key}\" is already set and cannot be modified.`);\n\t\tthis.name = \"KeyAlreadySet\";\n\t}\n}\n\n/**\n * A WriteOnceMap is a Map whose keys can only be written once. Once a key is set, subsequent attempts to update it will\n * throw a {@link KeyAlreadySet} error unless the `force` parameter is used.\n *\n * @typeParam K - type of the Map key.\n * @typeParam V - type of the Map value.\n *\n * @beta\n */\nexport class WriteOnceMap<K, V> extends Map<K, V> {\n\t/**\n\t * Adds a new element with a specified key and value to the Map. If an element with the same key already exists, a\n\t * {@link KeyAlreadySet} error will be thrown.\n\t *\n\t * @param key - The key to set.\n\t * @param value - The value to set.\n\t * @param force - Set to true to force a Map element to be updated whether it has previously been set or not.\n\t */\n\tpublic override set(key: K, value: V, force = false): this {\n\t\tif (this.has(key) && !force) {\n\t\t\tthrow new KeyAlreadySet(String(key));\n\t\t}\n\t\t// Setting the key anyway because of force.\n\t\treturn super.set(key, value);\n\t}\n}\n"]}