{
  "name": "tools-monorepo",
  "root": ".",
  "$schema": "node_modules/nx/schemas/project-schema.json",

  "targets": {
    // ============================================
    // ROOT-LEVEL WORKSPACE TASKS
    // ============================================

    "check:all": {
      "command": "concurrently npm:check:deps npm:check:format npm:check:policy npm:lint",
      "cache": false
    },

    "check:deps": {
      "command": "syncpack lint",
      "inputs": [
        "{workspaceRoot}/package.json",
        "{workspaceRoot}/packages/**/package.json",
        "{workspaceRoot}/*syncpack*"
      ],
      "cache": true
    },

    "check:format": {
      "command": "biome check --linter-enabled=false",
      "inputs": [
        "{workspaceRoot}/**/*",
        "{workspaceRoot}/biome.jsonc",
        "{workspaceRoot}/config/biome/*.jsonc"
      ],
      "cache": true
    },

    "check:policy": {
      "command": "repopo check",
      "dependsOn": ["repopo:build:compile"],
      "inputs": [
        "{workspaceRoot}/**/*",
        "{workspaceRoot}/repopo.config.ts"
      ],
      "cache": true
    },

    "format": {
      "command": "biome check . --linter-enabled=false --write",
      "cache": false
    },

    "lint": {
      "command": "biome lint",
      "inputs": [
        "{workspaceRoot}/**/*",
        "{workspaceRoot}/biome.jsonc"
      ],
      "cache": true
    },

    "lint:fix": {
      "command": "biome lint --write",
      "cache": false
    },

    "clean:root": {
      "command": "rimraf *.tsbuildinfo *.done.build.log",
      "cache": false
    },

    "fix:policy": {
      "command": "repopo check --fix",
      "cache": false
    },

    "sort-package-json": {
      "command": "sort-package-json package.json \"config/package.json\" \"packages/*/package.json\"",
      "cache": false
    },

    "sort:tsconfig": {
      "command": "sort-tsconfig \"config/tsconfig*.json\" --write && sort-tsconfig \"packages/*/tsconfig*.json\" --write",
      "cache": false
    },

    "syncpack:fix": {
      "command": "pnpm syncpack fix-mismatches && pnpm syncpack set-semver-ranges",
      "cache": false
    },

    "deps:sync": {
      "command": "tsx scripts/sync-lockfile-versions.ts",
      "cache": false
    }
  }
}
